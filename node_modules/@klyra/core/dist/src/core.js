"use strict";
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
    __setModuleDefault(result, mod);
    return result;
};
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.Klyra = void 0;
const chain_1 = require("@klyra/chain");
const cortex_1 = __importStar(require("@klyra/cortex"));
const shared_1 = require("@klyra/shared");
const shared_2 = require("@klyra/shared");
const ws_1 = __importDefault(require("@klyra/ws"));
const field_validations_1 = require("./transactions/field-validations");
const cancel_order_1 = require("./transactions/cancel-order");
const conditional_orders_1 = require("./transactions/conditional-orders");
const limit_order_1 = require("./transactions/limit-order");
const market_order_1 = require("./transactions/market-order");
const transfers_1 = require("./transactions/transfers");
class Klyra {
    constructor(config) {
        var _a, _b, _c, _d;
        this.config = new shared_1.Config(config.environment);
        const envConfig = this.config.getEnvConfig();
        this.routerSubaccountInfo = new chain_1.SubaccountInfo(config.fees.address, config.fees.subaccountNumber);
        this.routerFeePpm = config.fees.feePpm;
        // TODO: make this customizable by the user (they can pass their own statemanager)
        this.stateManager = new cortex_1.default({ ...config.cortex });
        this.websocketManager = new ws_1.default({
            ...config.websocket,
            url: envConfig.indexer.ws,
        });
        this.chainClient = new chain_1.ChainClient({
            node: {
                restUrl: envConfig.node.rest,
                chainId: envConfig.chainId,
            },
            indexer: {
                urls: envConfig.indexer,
            },
        });
        this.subscribeOnConnect = (_b = (_a = config.websocket) === null || _a === void 0 ? void 0 : _a.subscribeOnConnect) !== null && _b !== void 0 ? _b : true;
        this.websocketEnabled = (_d = (_c = config.websocket) === null || _c === void 0 ? void 0 : _c.enabled) !== null && _d !== void 0 ? _d : true;
    }
    async initialize() {
        this.websocketManager.on("message", (message) => {
            this.webSocketMessageReceived(message);
        });
        this.websocketManager.connect();
        await this.chainClient.initialize();
    }
    close() {
        this.websocketManager.disconnect();
    }
    getStore() {
        return this.stateManager.getState();
    }
    subscribeToState(listener) {
        return this.stateManager.subscribeToState(listener);
    }
    webSocketMessageReceived(message) {
        // if the message type is connected, we need to subscribe to all channels
        if (message.type === shared_2.MessageType.CONNECTED) {
            const channelsToSubscribe = [
                [shared_2.MessageChannel.MARKETS],
                // We don't connect to account because at this point the user hasn't authenticated yet
                // On authenticated, we will connect to account channel
            ];
            const { currentMarketTicker, user } = this.stateManager.getState();
            // If the app has a default market id, we subscribe to the specific market channels
            // Otherwise, we subscribe only to the general channels (markets) and wait for a user to set a market id
            if (currentMarketTicker) {
                channelsToSubscribe.push([shared_2.MessageChannel.CANDLES, currentMarketTicker]);
                channelsToSubscribe.push([
                    shared_2.MessageChannel.ORDERBOOK,
                    currentMarketTicker,
                ]);
                channelsToSubscribe.push([shared_2.MessageChannel.TRADES, currentMarketTicker]);
            }
            if (user.address) {
                channelsToSubscribe.push([
                    shared_2.MessageChannel.PARENT_SUBACCOUNTS,
                    `${user.address}/0`,
                ]);
            }
            if (this.subscribeOnConnect) {
                channelsToSubscribe.forEach(([channel, id]) => {
                    this.subscribeToWebSocketChannel(channel, id);
                });
            }
            return;
        }
        // otherwise, it's a "subscribed" or "channel_batch_data" message
        // so we pass it to Cortex
        this.stateManager.handleMessage(message);
    }
    subscribeToWebSocketChannel(channel, id) {
        if (this.websocketEnabled && this.websocketManager.isConnected) {
            this.websocketManager.send({
                type: shared_2.MessageType.SUBSCRIBE,
                channel,
                batched: true,
                id,
            });
        }
    }
    getChainClient() {
        return this.chainClient;
    }
    setCurrentTicker(ticker) {
        this.stateManager.setCurrentMarketTicker(ticker);
        // subscribe to the specific market channels
        this.subscribeToWebSocketChannel(shared_2.MessageChannel.CANDLES, ticker);
        this.subscribeToWebSocketChannel(shared_2.MessageChannel.ORDERBOOK, ticker);
        this.subscribeToWebSocketChannel(shared_2.MessageChannel.TRADES, ticker);
    }
    formInput(formType, fieldName, value) {
        this.stateManager.formInput(formType, fieldName, value);
    }
    setSubaccountNumber(subaccountNumber) {
        this.stateManager.setSubaccountNumber(subaccountNumber);
    }
    async getSubaccountFromSignature(signature, subaccountNumber = 0) {
        const { wallet, address } = await this.authenticateUserFromSignature(signature);
        const subaccountInfo = new chain_1.WalletSubaccountInfo(wallet, subaccountNumber);
        return { subaccount: subaccountInfo, wallet, address };
    }
    async getSubaccountFromUUID(uuid, subaccountNumber = 0) {
        const { wallet, address } = await this.authenticateUserFromUUID(uuid);
        const subaccountInfo = new chain_1.WalletSubaccountInfo(wallet, subaccountNumber);
        return { subaccount: subaccountInfo, wallet, address };
    }
    async authenticateUserFromUUID(uuid) {
        const { wallet } = await (0, chain_1.getAccountFromUUID)(uuid);
        const address = wallet.getAddress();
        this.subscribeToWebSocketChannel(shared_2.MessageChannel.PARENT_SUBACCOUNTS, `${address}/0` // we add the subaccount number to the end to subscribe to the parent subaccount
        );
        this.stateManager.setAddress(address);
        this.setSubaccountNumber(0);
        this.stateManager.setWalletInfo(wallet);
        return { wallet, address };
    }
    async authenticateUserFromSignature(signedMessage) {
        const { wallet } = await (0, chain_1.getAccountFromSignedMessage)(signedMessage);
        const address = wallet.getAddress();
        this.subscribeToWebSocketChannel(shared_2.MessageChannel.PARENT_SUBACCOUNTS, `${address}/0` // we add the subaccount number to the end to subscribe to the parent subaccount
        );
        this.stateManager.setAddress(address);
        this.setSubaccountNumber(0);
        this.stateManager.setWalletInfo(wallet);
        return { wallet, address };
    }
    getOrderbookPrice(ticker) {
        var _a, _b;
        const state = this.stateManager.getState();
        return (_b = (_a = state.orderbooks[ticker]) === null || _a === void 0 ? void 0 : _a.midPrice) !== null && _b !== void 0 ? _b : 0;
    }
    async getCurrentBlock() {
        const { height } = await this.chainClient.indexerClient.utils.getHeight();
        return parseInt(height);
    }
    async getCurrentBlockTime() {
        const time = await this.chainClient.indexerClient.utils.getTime();
        return new Date(time.iso).getTime();
    }
    getTradeInputs() {
        const state = this.stateManager.getState();
        const tradeForm = state.forms[cortex_1.FormType.TRADE];
        return tradeForm.inputs;
    }
    async placeMarketOrder(subaccount, ticker, side, size, reduceOnly, clientId, routerFeePpm, routerSubaccount, memo) {
        if (!this.chainClient.isInitialized) {
            throw new Error("Chain client not initialized");
        }
        const subaccountInfo = this.getSubaccountInfo(subaccount);
        if (this.config.isUsingCortexForms()) {
            const inputs = this.getTradeInputs();
            const hasValidInputs = (0, field_validations_1.validateFields)({
                ticker: inputs.marketId,
                side: inputs.side,
                size: inputs.quoteSize,
                reduceOnly: inputs.reduceOnly,
            });
            if (!hasValidInputs) {
                throw new Error("Invalid market order inputs");
            }
            return (0, market_order_1.internalPlaceMarketOrderWithCortex)(this.chainClient, inputs, subaccountInfo, this.getOrderbookPrice(inputs.marketId), await this.getCurrentBlock(), routerFeePpm !== null && routerFeePpm !== void 0 ? routerFeePpm : this.routerFeePpm, routerSubaccount !== null && routerSubaccount !== void 0 ? routerSubaccount : this.routerSubaccountInfo);
        }
        const hasValidInputs = (0, field_validations_1.validateFields)({
            subaccount,
            ticker,
            side,
            size,
            reduceOnly,
        });
        if (!hasValidInputs) {
            throw new Error("When Cortex is disabled, you must pass in order arguments");
        }
        return (0, market_order_1.internalPlaceMarketOrder)(this.chainClient, subaccountInfo, ticker, side, this.getOrderbookPrice(ticker), size, reduceOnly, await this.getCurrentBlock(), clientId, routerFeePpm !== null && routerFeePpm !== void 0 ? routerFeePpm : this.routerFeePpm, routerSubaccount !== null && routerSubaccount !== void 0 ? routerSubaccount : this.routerSubaccountInfo, memo);
    }
    async placeLimitOrder(subaccount, ticker, side, price, size, goodTilBlockTime, reduceOnly, clientId, routerFeePpm, routerSubaccount, memo) {
        if (!this.chainClient.isInitialized) {
            throw new Error("Chain client not initialized");
        }
        const subaccountInfo = this.getSubaccountInfo(subaccount);
        if (this.config.isUsingCortexForms()) {
            const inputs = this.getTradeInputs();
            const hasValidInputs = (0, field_validations_1.validateFields)({
                ticker: inputs.marketId,
                side: inputs.side,
                price: inputs.price,
                size: inputs.quoteSize,
                goodTilTime: inputs.goodTilTime,
                reduceOnly: inputs.reduceOnly,
            });
            if (!hasValidInputs) {
                throw new Error("Invalid limit order inputs");
            }
            return (0, limit_order_1.internalPlaceLimitOrderWithCortex)(this.chainClient, inputs, subaccountInfo, routerFeePpm !== null && routerFeePpm !== void 0 ? routerFeePpm : this.routerFeePpm, routerSubaccount !== null && routerSubaccount !== void 0 ? routerSubaccount : this.routerSubaccountInfo);
        }
        const hasValidInputs = (0, field_validations_1.validateFields)({
            subaccount,
            ticker,
            side,
            price,
            size,
            goodTilTime: goodTilBlockTime,
            reduceOnly,
        });
        if (!hasValidInputs) {
            throw new Error("When Cortex is disabled, you must pass in order arguments");
        }
        return await (0, limit_order_1.internalPlaceLimitOrder)(this.chainClient, subaccountInfo, ticker, side, price, size, goodTilBlockTime, reduceOnly, clientId, routerFeePpm !== null && routerFeePpm !== void 0 ? routerFeePpm : this.routerFeePpm, routerSubaccount !== null && routerSubaccount !== void 0 ? routerSubaccount : this.routerSubaccountInfo, memo);
    }
    async placeStopLossLimitOrder(subaccount, ticker, side, price, triggerPrice, size, goodTilBlockTime, reduceOnly, clientId, routerFeePpm, routerSubaccount, memo) {
        if (!this.chainClient.isInitialized) {
            throw new Error("Chain client not initialized");
        }
        const subaccountInfo = this.getSubaccountInfo(subaccount);
        if (this.config.isUsingCortexForms()) {
            const inputs = this.getTradeInputs();
            const hasValidInputs = (0, field_validations_1.validateFields)({
                ticker: inputs.marketId,
                side: inputs.side,
                price: inputs.price,
                triggerPrice: inputs.triggerPrice,
                size: inputs.quoteSize,
                goodTilTime: inputs.goodTilTime,
                reduceOnly: inputs.reduceOnly,
            });
            if (!hasValidInputs) {
                throw new Error("Invalid stop loss limit order inputs");
            }
            return (0, conditional_orders_1.internalPlaceStopLossLimitOrderWithCortex)(this.chainClient, inputs, subaccountInfo, routerFeePpm !== null && routerFeePpm !== void 0 ? routerFeePpm : this.routerFeePpm, routerSubaccount !== null && routerSubaccount !== void 0 ? routerSubaccount : this.routerSubaccountInfo);
        }
        const hasValidInputs = (0, field_validations_1.validateFields)({
            subaccount,
            ticker,
            side,
            price,
            triggerPrice,
            size,
            goodTilTime: goodTilBlockTime,
            reduceOnly,
        });
        if (!hasValidInputs) {
            throw new Error("When Cortex is disabled, you must pass in order arguments");
        }
        return await (0, conditional_orders_1.internalPlaceStopLossLimitOrder)(this.chainClient, subaccountInfo, ticker, side, price, triggerPrice, size, goodTilBlockTime, reduceOnly, clientId, routerFeePpm !== null && routerFeePpm !== void 0 ? routerFeePpm : this.routerFeePpm, routerSubaccount !== null && routerSubaccount !== void 0 ? routerSubaccount : this.routerSubaccountInfo, memo);
    }
    async placeStopLossMarketOrder(subaccount, ticker, side, triggerPrice, size, goodTilBlockTime, reduceOnly, clientId, routerFeePpm, routerSubaccount, memo) {
        if (!this.chainClient.isInitialized) {
            throw new Error("Chain client not initialized");
        }
        const subaccountInfo = this.getSubaccountInfo(subaccount);
        if (this.config.isUsingCortexForms()) {
            const inputs = this.getTradeInputs();
            const hasValidInputs = (0, field_validations_1.validateFields)({
                ticker: inputs.marketId,
                side: inputs.side,
                triggerPrice: inputs.triggerPrice,
                size: inputs.quoteSize,
                goodTilTime: inputs.goodTilTime,
                reduceOnly: inputs.reduceOnly,
            });
            if (!hasValidInputs) {
                throw new Error("Invalid stop loss market order inputs");
            }
            return (0, conditional_orders_1.internalPlaceStopLossMarketOrderWithCortex)(this.chainClient, inputs, subaccountInfo, routerFeePpm !== null && routerFeePpm !== void 0 ? routerFeePpm : this.routerFeePpm, routerSubaccount !== null && routerSubaccount !== void 0 ? routerSubaccount : this.routerSubaccountInfo);
        }
        const hasValidInputs = (0, field_validations_1.validateFields)({
            subaccount,
            ticker,
            side,
            triggerPrice,
            size,
            goodTilTime: goodTilBlockTime,
            reduceOnly,
        });
        if (!hasValidInputs) {
            throw new Error("When Cortex is disabled, you must pass in order arguments");
        }
        return await (0, conditional_orders_1.internalPlaceStopLossMarketOrder)(this.chainClient, subaccountInfo, ticker, side, 0, triggerPrice, size, goodTilBlockTime, reduceOnly, clientId, routerFeePpm !== null && routerFeePpm !== void 0 ? routerFeePpm : this.routerFeePpm, routerSubaccount !== null && routerSubaccount !== void 0 ? routerSubaccount : this.routerSubaccountInfo, memo);
    }
    async placeTakeProfitMarketOrder(subaccount, ticker, side, triggerPrice, size, goodTilBlockTime, reduceOnly, clientId, routerFeePpm, routerSubaccount, memo) {
        if (!this.chainClient.isInitialized) {
            throw new Error("Chain client not initialized");
        }
        const subaccountInfo = this.getSubaccountInfo(subaccount);
        if (this.config.isUsingCortexForms()) {
            const inputs = this.getTradeInputs();
            const hasValidInputs = (0, field_validations_1.validateFields)({
                ticker: inputs.marketId,
                side: inputs.side,
                triggerPrice: inputs.triggerPrice,
                size: inputs.quoteSize,
                goodTilTime: inputs.goodTilTime,
                reduceOnly: inputs.reduceOnly,
            });
            if (!hasValidInputs) {
                throw new Error("Invalid take profit market order inputs");
            }
            return (0, conditional_orders_1.internalPlaceTakeProfitMarketOrderWithCortex)(this.chainClient, inputs, subaccountInfo, routerFeePpm !== null && routerFeePpm !== void 0 ? routerFeePpm : this.routerFeePpm, routerSubaccount !== null && routerSubaccount !== void 0 ? routerSubaccount : this.routerSubaccountInfo);
        }
        const hasValidInputs = (0, field_validations_1.validateFields)({
            subaccount,
            ticker,
            side,
            triggerPrice,
            size,
            goodTilTime: goodTilBlockTime,
            reduceOnly,
        });
        if (!hasValidInputs) {
            throw new Error("When Cortex is disabled, you must pass in order arguments");
        }
        return await (0, conditional_orders_1.internalPlaceTakeProfitMarketOrder)(this.chainClient, subaccountInfo, ticker, side, 0, triggerPrice, size, goodTilBlockTime, reduceOnly, clientId, routerFeePpm !== null && routerFeePpm !== void 0 ? routerFeePpm : this.routerFeePpm, routerSubaccount !== null && routerSubaccount !== void 0 ? routerSubaccount : this.routerSubaccountInfo, memo);
    }
    async placeTakeProfitLimitOrder(subaccount, ticker, side, price, triggerPrice, size, goodTilBlockTime, reduceOnly, clientId, routerFeePpm, routerSubaccount, memo) {
        if (!this.chainClient.isInitialized) {
            throw new Error("Chain client not initialized");
        }
        if (this.config.isUsingCortexForms()) {
            const inputs = this.getTradeInputs();
            const hasValidInputs = (0, field_validations_1.validateFields)({
                ticker: inputs.marketId,
                side: inputs.side,
                price: inputs.price,
                triggerPrice: inputs.triggerPrice,
                size: inputs.quoteSize,
                goodTilTime: inputs.goodTilTime,
                reduceOnly: inputs.reduceOnly,
            });
            if (!hasValidInputs) {
                throw new Error("Invalid take profit limit order inputs");
            }
            const subaccountInfo = this.getSubaccountInfo(subaccount);
            return (0, conditional_orders_1.internalPlaceTakeProfitLimitOrderWithCortex)(this.chainClient, inputs, subaccountInfo, routerFeePpm !== null && routerFeePpm !== void 0 ? routerFeePpm : this.routerFeePpm, routerSubaccount !== null && routerSubaccount !== void 0 ? routerSubaccount : this.routerSubaccountInfo);
        }
        const hasValidInputs = (0, field_validations_1.validateFields)({
            subaccount,
            ticker,
            side,
            price,
            triggerPrice,
            size,
            goodTilTime: goodTilBlockTime,
            reduceOnly,
        });
        if (!hasValidInputs) {
            throw new Error("When Cortex is disabled, you must pass in order arguments");
        }
        return await (0, conditional_orders_1.internalPlaceTakeProfitLimitOrder)(this.chainClient, subaccount, ticker, side, price, triggerPrice, size, goodTilBlockTime, reduceOnly, clientId, routerFeePpm !== null && routerFeePpm !== void 0 ? routerFeePpm : this.routerFeePpm, routerSubaccount !== null && routerSubaccount !== void 0 ? routerSubaccount : this.routerSubaccountInfo, memo);
    }
    async placeCustomOrder(subaccount, ticker, type, side, price, size, clientId, timeInForce, goodTilTimeInSeconds, routerFeePpm, routerSubaccount, execution, postOnly, reduceOnly, triggerPrice, marketInfo, currentHeight, goodTilBlock, memo) {
        return await this.chainClient.placeOrder(subaccount, ticker, type, side, price, size, clientId, timeInForce, goodTilTimeInSeconds, routerFeePpm !== null && routerFeePpm !== void 0 ? routerFeePpm : this.routerFeePpm, routerSubaccount !== null && routerSubaccount !== void 0 ? routerSubaccount : this.routerSubaccountInfo, execution, postOnly, reduceOnly, triggerPrice, marketInfo, currentHeight, goodTilBlock, memo);
    }
    async cancelMarketOrder(subaccount, ticker, clientId, goodTilBlock) {
        if (!this.chainClient.isInitialized) {
            throw new Error("Chain client not initialized");
        }
        const subaccountInfo = this.getSubaccountInfo(subaccount);
        const hasValidInputs = (0, cancel_order_1.hasReceivedNecessaryCancelOrderArgs)(false, null, subaccountInfo, ticker, clientId, goodTilBlock);
        if (!hasValidInputs) {
            throw new Error("You must pass in order arguments to cancel an order.");
        }
        return await this.chainClient.cancelOrder(subaccountInfo, clientId, chain_1.OrderFlags.SHORT_TERM, ticker, goodTilBlock);
    }
    async cancelLimitOrder(subaccount, ticker, clientId, goodTilBlockTime) {
        if (!this.chainClient.isInitialized) {
            throw new Error("Chain client not initialized");
        }
        // const currBlock = await this.getCurrentBlock();
        const subaccountInfo = this.getSubaccountInfo(subaccount);
        const hasValidInputs = (0, cancel_order_1.hasReceivedNecessaryCancelOrderArgs)(true, null, subaccountInfo, ticker, clientId);
        if (!hasValidInputs) {
            throw new Error("You must pass in order arguments to cancel an order.");
        }
        return await this.chainClient.cancelOrder(subaccountInfo, clientId, chain_1.OrderFlags.LONG_TERM, ticker, undefined, goodTilBlockTime);
    }
    async cancelConditionalOrder(subaccount, ticker, clientId, goodTilBlockTime) {
        if (!this.chainClient.isInitialized) {
            throw new Error("Chain client not initialized");
        }
        const subaccountInfo = this.getSubaccountInfo(subaccount);
        const hasValidInputs = (0, cancel_order_1.hasReceivedNecessaryCancelOrderArgs)(true, null, subaccountInfo, ticker, clientId);
        if (!hasValidInputs) {
            throw new Error("You must pass in order arguments to cancel an order.");
        }
        return await this.chainClient.cancelOrder(subaccountInfo, clientId, chain_1.OrderFlags.CONDITIONAL, ticker, undefined, goodTilBlockTime);
    }
    async transfer(subaccount, recipientAddress, recipientSubaccountNumber, amount) {
        if (!this.chainClient.isInitialized) {
            throw new Error("Chain client not initialized");
        }
        const hasValidInputs = (0, transfers_1.hasValidTransferArgs)(subaccount, recipientAddress, recipientSubaccountNumber, amount);
        if (!hasValidInputs) {
            throw new Error("You must pass in order arguments to transfer an asset.");
        }
        return this.chainClient.transferToSubaccount(subaccount, recipientAddress, recipientSubaccountNumber, amount);
    }
    async getMarketInfo(ticker) {
        const marketsClient = this.chainClient.indexerClient.markets;
        const marketInfo = await marketsClient.getPerpetualMarket(ticker);
        return marketInfo;
    }
    async getMarketCandles(ticker, resolution, fromISO, toISO) {
        const marketsClient = this.chainClient.indexerClient.markets;
        const candles = await marketsClient.getPerpetualMarketCandles(ticker, resolution, fromISO, toISO);
        return candles.candles;
    }
    async getOrderbook(ticker) {
        const marketsClient = this.chainClient.indexerClient.markets;
        const orderbook = marketsClient.getPerpetualMarketOrderbook(ticker);
        return orderbook;
    }
    async getMarketTrades(ticker, startingBeforeOrAt, page) {
        const marketsClient = this.chainClient.indexerClient.markets;
        const trades = await marketsClient.getPerpetualMarketTrades(ticker, undefined, startingBeforeOrAt, undefined, page);
        return trades.trades;
    }
    async getHistoricalFundingRates(ticker) {
        const marketsClient = this.chainClient.indexerClient.markets;
        const historicalFundings = await marketsClient.getPerpetualMarketHistoricalFunding(ticker);
        return historicalFundings.historicalFunding;
    }
    async getUserPositions(address, subaccountNumber) {
        const account = this.chainClient.indexerClient.account;
        const trades = await account.getSubaccountAssetPositions(address, subaccountNumber);
        return trades;
    }
    // TODO(UCC) - we should transition types like IndexerOrderSide to OrderSide in the return
    async getUserOrders(address, subaccountNumber, ticker, side) {
        const account = this.chainClient.indexerClient.account;
        const orders = await account.getSubaccountOrders(address, subaccountNumber, ticker, side);
        return orders;
    }
    async getUserFills(address, subaccountNumber, ticker, createdBeforeOrAt, page) {
        const account = this.chainClient.indexerClient.account;
        const fills = await account.getSubaccountFills(address, subaccountNumber, ticker, undefined, undefined, createdBeforeOrAt, page);
        return fills;
    }
    async getUserTransfers(address, subaccountNumber, createdBeforeOrAt, page) {
        const account = this.chainClient.indexerClient.account;
        const transfers = await account.getSubaccountTransfers(address, subaccountNumber, undefined, undefined, createdBeforeOrAt, page);
        return transfers;
    }
    async getUserHistoricalPNLs(address, subaccountNumber, createdOnOrAfter, page) {
        const account = this.chainClient.indexerClient.account;
        const pnls = await account.getSubaccountHistoricalPNLs(address, subaccountNumber, undefined, undefined, undefined, createdOnOrAfter, undefined, page);
        return pnls;
    }
    async getParentSubaccountFills(address, parentSubaccountNumber, ticker, limit, createdBeforeOrAtHeight, createdBeforeOrAt, page) {
        const account = this.chainClient.indexerClient.account;
        const fills = await account.getParentSubaccountNumberFills(address, parentSubaccountNumber, ticker, limit, createdBeforeOrAtHeight, createdBeforeOrAt, page);
        return fills;
    }
    async getParentSubaccountTransfers(address, parentSubaccountNumber, limit, createdBeforeOrAtHeight, createdBeforeOrAt, page) {
        const account = this.chainClient.indexerClient.account;
        const transfers = await account.getParentSubaccountNumberTransfers(address, parentSubaccountNumber, limit, createdBeforeOrAtHeight, createdBeforeOrAt, page);
        return transfers;
    }
    async getAllUserSubaccountsInfo(address) {
        const account = this.chainClient.indexerClient.account;
        const subaccounts = await account.getSubaccounts(address);
        return subaccounts.subaccounts;
    }
    async getUserSubaccountInfo(address, subaccountNumber) {
        const account = this.chainClient.indexerClient.account;
        const subaccount = await account.getSubaccount(address, subaccountNumber);
        return subaccount;
    }
    async getOrder(orderId) {
        const account = this.chainClient.indexerClient.account;
        const order = await account.getOrder(orderId);
        return order;
    }
    async getAllMarkets() {
        const marketsClient = this.chainClient.indexerClient.markets;
        const markets = await marketsClient.getAllPerpetualMarkets();
        return markets.markets;
    }
    getSubaccountInfo(subaccount) {
        let subaccountInfo = subaccount;
        if (!subaccountInfo) {
            const { subaccountNumber, wallet } = this.stateManager.getState().user;
            if (!wallet) {
                throw new Error("You must authenticate the user (via `authenticateUser(...)`) before cancelling an order.");
            }
            subaccountInfo = new chain_1.WalletSubaccountInfo(wallet, subaccountNumber);
        }
        return subaccountInfo;
    }
}
exports.Klyra = Klyra;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29yZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9jb3JlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsd0NBVXNCO0FBQ3RCLHdEQVl1QjtBQUN2QiwwQ0FBeUQ7QUFDekQsMENBcUJ1QjtBQUN2QixtREFBeUM7QUFDekMsd0VBQWtFO0FBQ2xFLDhEQUFrRjtBQUNsRiwwRUFTMkM7QUFDM0MsNERBR29DO0FBQ3BDLDhEQUdxQztBQUNyQyx3REFBZ0U7QUFrQmhFLE1BQWEsS0FBSztJQVVoQixZQUFZLE1BQW9COztRQUM5QixJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksZUFBTSxDQUFDLE1BQU0sQ0FBQyxXQUFXLENBQUMsQ0FBQztRQUM3QyxNQUFNLFNBQVMsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLFlBQVksRUFBRSxDQUFDO1FBRTdDLElBQUksQ0FBQyxvQkFBb0IsR0FBRyxJQUFJLHNCQUFjLENBQzVDLE1BQU0sQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUNuQixNQUFNLENBQUMsSUFBSSxDQUFDLGdCQUFnQixDQUM3QixDQUFDO1FBQ0YsSUFBSSxDQUFDLFlBQVksR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQztRQUV2QyxrRkFBa0Y7UUFDbEYsSUFBSSxDQUFDLFlBQVksR0FBRyxJQUFJLGdCQUFZLENBQUMsRUFBRSxHQUFHLE1BQU0sQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFDO1FBQzNELElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxJQUFJLFlBQWdCLENBQUM7WUFDM0MsR0FBRyxNQUFNLENBQUMsU0FBUztZQUNuQixHQUFHLEVBQUUsU0FBUyxDQUFDLE9BQU8sQ0FBQyxFQUFFO1NBQzFCLENBQUMsQ0FBQztRQUVILElBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxtQkFBVyxDQUFDO1lBQ2pDLElBQUksRUFBRTtnQkFDSixPQUFPLEVBQUUsU0FBUyxD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